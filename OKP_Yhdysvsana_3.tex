\documentclass{tktltiki}

\usepackage[pdftex]{graphicx}
\usepackage{subfigure}
\usepackage{url}
\usepackage{amsmath}
\usepackage{comment}

\begin{document}
%\doublespacing
%\singlespacing
\onehalfspacing

\title{COBOL ja Python: Tyypitys ja laskennan kapselointi}
\author{Erkki Heino, Tero Huomo, Eeva Terkki}
\date{\today}

\maketitle


\mytableofcontents

\section{Tyyppijärjestelmät}

\subsection{COBOL}

COBOL on vahvasti ja staattisesti tyypitetty kieli \cite{wikipediacobol}. Olio-orientointunut COBOL (Object Oriented COBOL) sisältää sekä vahvan että heikon tyypityksen piirteitä. \cite{objectorientedcobol}

"In COBOL, there are really only three data types -

- numeric

- alphanumeric (text/string)

- alphabetic

The distinction between these data types is a little blurred and only weakly enforced by the compiler. For instance, it is perfectly possible to assign a non-numeric value to a data item that has been declared to be numeric.

The problem with this lax approach to data typing is that, since COBOL programs crash (halt unexpectedly) if they attempt to do computations on items that contain non-numeric data, it is up to the programmer to make sure this never happens."

- http://www.csis.ul.ie/cobol/course/DataDeclaration.htm


Eli kääntäjä ei tee tyyppitarkistuksia (ei olisi staattinen)? Vai puhuiko teksti käyttäjän syötteistä? (Mikä COBOLin versio?)



\subsection{Python}

Python on vahvasti tyypitetty kieli \cite{staticvsdynamic}. Tietyn tyyppiselle muuttujalle ei voida tehdä toisen tyypin operaatioita ennen eksplisiittistä tyyppimuunnosta.

\begin{samepage}
\begin{verbatim}
a = 5
b = "9"
c = a + int(b)
\end{verbatim}
\end{samepage}

Esimerkissä \verb+b+ sisältää merkkijonon "9", mutta yhteenlaskussa merkkijonosta jäsennetään kokonaisluku. Jos kokonaislukujäsennyksen jättää tekemättä, antaa ohjelma kyseisellä rivillä poikkeuksen. 

Suoritusaikana muuttujan tyyppi ei ole sidottu, vaan muuttujaan voi dynaamisesti sitoa eri vaiheessa eri tyyppisiä olioita. Seuraavassa esimerkissä muuttuja \verb+a+ saa ensin kokonaislukuarvon 5. Sen jälkeen muuttujan \verb+a+ arvoksi muutetaan merkkijono "hei".

\begin{samepage}
\begin{verbatim}
a = 5
a = "Hei"
\end{verbatim}
\end{samepage}

\section{Laskennan kapselointi}

\subsection{COBOL}

Muistilistaa:

- "Support for complexity management is minimal in COBOL, with no language features which support any structures larger than subprogram modules." ( http://archive.adaic.com/docs/reports/lawlis/m.htm )

-  Funktioista COBOL ANSI-85 ( http://public.support.unisys.com/aseries/docs/clearpath-mcp-13.0/pdf/86001518-310.pdf )

- Object Oriented COBOL (2002) tukee nimettyjä funktioita ja funktioprototyyppejä, sekä tietysti olioita/perintää/polyformismia (http://en.wikipedia.org/wiki/COBOL)

- Kielessä ei luontaista tukea rinnakkaislaskennalle ( http://archive.adaic.com/docs/reports/lawlis/m.htm ) mutta osa vendoreista tarjoaa apuvälineitä rinnakkaisuuteen (esim. http://supportline.microfocus.com/documentation/books/oc41books/prconc.htm )

\subsection{Python}

Pythonissa funktioiden parametrit ovat arvoparametreja. Lähestulkoon kaikki esitetään kielessä olioina, ja arvoparametrit ovat viitteitä olioihin; ne siis toimivat samalla tavalla kuin parametrina annetut oliot Javassa. 

Funktioiden parametrit ovat tavallisesti ns. \textit{positional-or-keyword}-parametreja \cite{glossary}. Tämä tarkoittaa sitä, että funktiokutsussa voi välittää argumentin joko sen sijainnin perusteella tai käyttämällä avainsanaa. Parametrille voi määritellä oletusarvon. Tällöin vastaavan argumentin voi jättää funktiokutsusta pois ja parametrin arvoksi annetaan määrätty oletusarvo. Ilman oletusarvoa olevat parametrit on listattava funktion määritelmässä ensimmäisenä, ja niiden jälkeen tulevat oletusarvolliset parametrit.

Funktiokutsussa funktiolle välitettävät argumentit voivat olla avainsana-argumentteja (keyword argument) tai "tavallisia" argumentteja \cite{glossary}. Avainsana-argumentissa argumenttia edeltää tunniste, joka kertoo, mistä funktion parametrista on kyse. Avainsana-argumentit voivat olla funktiokutsussa keskenään eri järjestyksessä kuin vastaavat parametrit funktion määritelmässä. Argumentit, joissa ei käytetä parametrin tunnistetta, on annettava funktion määritelmän parametrilistauksen mukaisessa järjestyksessä.  

Seuraavan funktion parametreista kahdella on oletusarvo ja yhdellä ei:

\begin{verbatim}
def tervehdi(nimi, tervehdys="Hei", viesti=None):
    print tervehdys, nimi    
    if viesti:
        print viesti      
\end{verbatim}

Funktiota \verb+tervehdi+ kutsuttaessa vain yksi argumentti on pakollinen. Funktiokutsut erilaisilla argumenteilla tuottavat seuraavanlaisia tulostuksia:

\begin{samepage}
\begin{verbatim}
>>> tervehdi("Pekka", "Moi")
Moi Pekka
\end{verbatim}
\end{samepage}

\begin{samepage}
\begin{verbatim}
>>> tervehdi("Pekka", viesti="Kvaak kvaak")
Hei Pekka
Kvaak kvaak
\end{verbatim}
\end{samepage}

\begin{samepage}
\begin{verbatim}
>>> tervehdi(viesti="Opettele Pythonia", nimi="Pekka", tervehdys="Terve")
Terve Pekka
Opettele Pythonia
\end{verbatim}
\end{samepage}

Suoritusaikaiseen virheeseen johtavia funktiokutsuja puolestaan olisivat esimerkiksi kutsut \verb+tervehdi()+, \verb+tervehdi("Pekka", "Moi", tervehdys="Terve")+ sekä\\ \verb+tervehdi(tervehdys="Moi", "Pekka")+.

Suoritusaikaisen virheen sattuessa Python-tulkki nostaa poikkeuksen \cite{everythingreturnedexception}. Poikkeus voidaan nostaa myös ohjelmakoodissa käyttämällä \verb+raise+-lausetta. Poikkeuskäsittelijä määritellään \verb+try..except+-lauseella, joka muistuttaa Javan \verb+try..catch+-rakennetta. Poikkeuskäsittelijällä voi olla useita \verb+except+-haaroja, ja Javan tavoin tilanteeseen sopiva haara valitaan poikkeuksen luokan mukaan.

Pythonissa on tuki rinnakkaiselle ohjelmoinnille. Kielen \verb+threading+-kirjasto tarjoaa tähän esimerkiksi säikeet, lukot ja semaforit. \verb+Queue+-moduuli tarjoaa turvallisen tavan säikeiden käsittelyyn.

\section{Etuja ja haittoja}

\newpage
 
\bibliographystyle{tktl}
\bibliography{lahteet}

\lastpage

\appendices

\pagestyle{empty}

%\internalappendix{1}{Malli ABC}

\end{document}